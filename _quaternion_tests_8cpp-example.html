<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SA_Maths: QuaternionTests.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">SA_Maths
   </div>
   <div id="projectbrief">Sapphire Suite&#39;s C++ Maths Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">QuaternionTests.cpp</div></div>
</div><!--header-->
<div class="contents">
<p>Examples and Unitary Tests for Quat.</p>
<div class="fragment"><div class="line"><span class="comment">// Copyright (c) 2023 Sapphire development team. All Rights Reserved.</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;QuaternionTests.hpp&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;Vector3Tests.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;../Angle/DegreeTests.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;../Angle/RadianTests.hpp&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span>SA::UT::Quaternion</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line">    <span class="keyword">class </span>QuaternionTest : <span class="keyword">public</span> testing::Test</div>
<div class="line">    {</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">using </span>TestTypes = ::testing::Types&lt;float, double&gt;;</div>
<div class="line">    TYPED_TEST_SUITE(QuaternionTest, TestTypes);</div>
<div class="line"> </div>
<div class="line">    TYPED_TEST(QuaternionTest, Constants)</div>
<div class="line">    {</div>
<div class="line">        EXPECT_EQ(QuatT::Zero.w, 0);</div>
<div class="line">        EXPECT_EQ(QuatT::Zero.x, 0);</div>
<div class="line">        EXPECT_EQ(QuatT::Zero.y, 0);</div>
<div class="line">        EXPECT_EQ(QuatT::Zero.z, 0);</div>
<div class="line"> </div>
<div class="line">        EXPECT_EQ(QuatT::Identity.w, 1);</div>
<div class="line">        EXPECT_EQ(QuatT::Identity.x, 0);</div>
<div class="line">        EXPECT_EQ(QuatT::Identity.y, 0);</div>
<div class="line">        EXPECT_EQ(QuatT::Identity.z, 0);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    TYPED_TEST(QuaternionTest, Constructors)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Default constructor.</span></div>
<div class="line">        <span class="keyword">const</span> QuatT q0;</div>
<div class="line">        EXPECT_EQ(q0.w, 1);</div>
<div class="line">        EXPECT_EQ(q0.x, 0);</div>
<div class="line">        EXPECT_EQ(q0.y, 0);</div>
<div class="line">        EXPECT_EQ(q0.z, 0);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Value constructor.</span></div>
<div class="line">        <span class="keyword">const</span> TypeParam q1W = TypeParam{ 893.12 };</div>
<div class="line">        <span class="keyword">const</span> TypeParam q1X = TypeParam{ 5.23 };</div>
<div class="line">        <span class="keyword">const</span> TypeParam q1Y = TypeParam{ 9.487 };</div>
<div class="line">        <span class="keyword">const</span> TypeParam q1Z = TypeParam{ 63.25 };</div>
<div class="line">        <span class="keyword">const</span> QuatT q1(q1W, q1X, q1Y, q1Z);</div>
<div class="line"> </div>
<div class="line">        EXPECT_EQ(q1.w, q1W);</div>
<div class="line">        EXPECT_EQ(q1.x, q1X);</div>
<div class="line">        EXPECT_EQ(q1.y, q1Y);</div>
<div class="line">        EXPECT_EQ(q1.z, q1Z);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Angle axis.</span></div>
<div class="line">        <span class="keyword">const</span> DegT q2An = 46_deg;</div>
<div class="line">        <span class="keyword">const</span> RadT q2HAn = q2An / TypeParam{ 2.0 };</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">const</span> Vec3T q2Ax = Vec3T(TypeParam{ 15.01 }, TypeParam{ 0.321 }, TypeParam{ 6.21 }).Normalize();</div>
<div class="line">        <span class="keyword">const</span> Vec3T res_q2Ax = q2Ax * Maths::Sin(q2HAn);</div>
<div class="line">        <span class="keyword">const</span> QuatT q2(q2An, q2Ax);</div>
<div class="line"> </div>
<div class="line">        EXPECT_EQ(q2.w, Maths::Cos(q2HAn));</div>
<div class="line">        EXPECT_EQ(q2.x, res_q2Ax.x);</div>
<div class="line">        EXPECT_EQ(q2.y, res_q2Ax.y);</div>
<div class="line">        EXPECT_EQ(q2.z, res_q2Ax.z);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Value cast constructor.</span></div>
<div class="line">        <span class="keyword">const</span> int32_t q3W = 63;</div>
<div class="line">        <span class="keyword">const</span> int32_t q3X = 464;</div>
<div class="line">        <span class="keyword">const</span> int32_t q3Y = 92;</div>
<div class="line">        <span class="keyword">const</span> int32_t q3Z = 4;</div>
<div class="line">        <span class="keyword">const</span> QuatT q3(Quat&lt;int32_t&gt;(q3W, q3X, q3Y, q3Z));</div>
<div class="line"> </div>
<div class="line">        EXPECT_EQ(q3.w, q3W);</div>
<div class="line">        EXPECT_EQ(q3.x, q3X);</div>
<div class="line">        EXPECT_EQ(q3.y, q3Y);</div>
<div class="line">        EXPECT_EQ(q3.z, q3Z);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Copy constructor.</span></div>
<div class="line">        <span class="keyword">const</span> QuatT q4(q1);</div>
<div class="line"> </div>
<div class="line">        EXPECT_EQ(q4.w, q1.w);</div>
<div class="line">        EXPECT_EQ(q4.x, q1.x);</div>
<div class="line">        EXPECT_EQ(q4.y, q1.y);</div>
<div class="line">        EXPECT_EQ(q4.z, q1.z);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    TYPED_TEST(QuaternionTest, Equals)</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">const</span> QuatT q1(TypeParam{ 1.235 }, TypeParam{ 56.351 }, TypeParam{ 45.398 }, TypeParam{ 99.25 });</div>
<div class="line">        <span class="keyword">const</span> QuatT q2(TypeParam{ 63.2 }, TypeParam{ 145.87 }, TypeParam{ 51.32 }, TypeParam{ -48.2 });</div>
<div class="line"> </div>
<div class="line">        EXPECT_FALSE(q1.IsZero());</div>
<div class="line">        EXPECT_TRUE(QuatT::Zero.IsZero());</div>
<div class="line"> </div>
<div class="line">        EXPECT_TRUE(q1.Equals(q1));</div>
<div class="line">        EXPECT_FALSE(q1.Equals(q2));</div>
<div class="line"> </div>
<div class="line">        EXPECT_EQ(q1, q1);</div>
<div class="line">        EXPECT_NE(q1, q2);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    TYPED_TEST(QuaternionTest, Length)</div>
<div class="line">    {</div>
<div class="line">        QuatT q1(TypeParam{ 63.21 }, TypeParam{ 12.365 }, TypeParam{ 9.155 }, TypeParam{ 22.362 });</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">const</span> TypeParam qLenSqr = q1.w * q1.w + q1.x * q1.x + q1.y * q1.y + q1.z * q1.z;</div>
<div class="line">        <span class="keyword">const</span> TypeParam qLen = Maths::Sqrt(qLenSqr);</div>
<div class="line"> </div>
<div class="line">        EXPECT_EQ(q1.Length(), qLen);</div>
<div class="line">        EXPECT_EQ(q1.SqrLength(), qLenSqr);</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">const</span> QuatT nQ1 = q1.GetNormalized();</div>
<div class="line">        EXPECT_EQ(nQ1.w, q1.w / qLen);</div>
<div class="line">        EXPECT_EQ(nQ1.x, q1.x / qLen);</div>
<div class="line">        EXPECT_EQ(nQ1.y, q1.y / qLen);</div>
<div class="line">        EXPECT_EQ(nQ1.z, q1.z / qLen);</div>
<div class="line"> </div>
<div class="line">        EXPECT_TRUE(nQ1.IsNormalized());</div>
<div class="line">        EXPECT_FALSE(q1.IsNormalized());</div>
<div class="line"> </div>
<div class="line">        EXPECT_NEAR(nQ1.Length(), 1.0, std::numeric_limits&lt;TypeParam&gt;::epsilon());</div>
<div class="line"> </div>
<div class="line">        q1.Normalize();</div>
<div class="line">        EXPECT_EQ(q1, nQ1);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    TYPED_TEST(QuaternionTest, Inverse)</div>
<div class="line">    {</div>
<div class="line">        QuatT q1 = QuatT(TypeParam{ 63.21 }, TypeParam{ 12.365 }, TypeParam{ 9.155 }, TypeParam{ 22.362 }).Normalize();</div>
<div class="line">        <span class="keyword">const</span> QuatT q2 = q1.GetInversed();</div>
<div class="line"> </div>
<div class="line">        EXPECT_EQ(q2.w, q1.w);</div>
<div class="line">        EXPECT_EQ(q2.x, -q1.x);</div>
<div class="line">        EXPECT_EQ(q2.y, -q1.y);</div>
<div class="line">        EXPECT_EQ(q2.z, -q1.z);</div>
<div class="line"> </div>
<div class="line">        q1.Inverse();</div>
<div class="line">        EXPECT_EQ(q1, q2);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    TYPED_TEST(QuaternionTest, Rotate)</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">const</span> QuatT q1(</div>
<div class="line">            TypeParam{ 0.65379899684951437 },</div>
<div class="line">            TypeParam{ 0.49198400932684733 },</div>
<div class="line">            TypeParam{ -0.57343602132006610 },</div>
<div class="line">            TypeParam{ -0.040862400050191698 }</div>
<div class="line">        );</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">const</span> QuatT q2(</div>
<div class="line">            TypeParam{ 0.28456911695921927 },</div>
<div class="line">            TypeParam{ 0.055287819843885436 },</div>
<div class="line">            TypeParam{ -0.16261099422502870 },</div>
<div class="line">            TypeParam{ -0.94314438937370981 }</div>
<div class="line">        );</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">const</span> QuatT q1mltq2(</div>
<div class="line">            TypeParam{ 0.027064135033571496 },</div>
<div class="line">            TypeParam{ 0.71033886691834713 },</div>
<div class="line">            TypeParam{ 0.19225567792515003 },</div>
<div class="line">            TypeParam{ -0.67655301421661274 }</div>
<div class="line">        );</div>
<div class="line">        EXPECT_EQ(q1.Rotate(q2), q1mltq2);</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">const</span> QuatT q1dq2(</div>
<div class="line">            TypeParam{ 0.34503787137100783 },</div>
<div class="line">            TypeParam{ -0.63804462461448919 },</div>
<div class="line">            TypeParam{ -0.40488548772720184 },</div>
<div class="line">            TypeParam{ -0.55670069709694570 }</div>
<div class="line">        );</div>
<div class="line">        EXPECT_EQ(q1.UnRotate(q2), q1dq2);</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">const</span> Vec3T axis(</div>
<div class="line">            TypeParam{ 0.29814198175425533 },</div>
<div class="line">            TypeParam{ -0.74535601236806759 },</div>
<div class="line">            TypeParam{ 0.59628497678745696 }</div>
<div class="line">        );</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">const</span> Vec3T q1RAxis(</div>
<div class="line">            TypeParam{ 0.010723429759060848 },</div>
<div class="line">            TypeParam{ -0.92185347418970509 },</div>
<div class="line">            TypeParam{ -0.38739021693709924 }</div>
<div class="line">        );</div>
<div class="line">        EXPECT_EQ(q1.Rotate(axis), q1RAxis);</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">const</span> Vec3T q1URAxis(</div>
<div class="line">            TypeParam{ 0.98459187055002440 },</div>
<div class="line">            TypeParam{ -0.12279218574048728 },</div>
<div class="line">            TypeParam{ 0.12450272112639649 }</div>
<div class="line">        );</div>
<div class="line">        EXPECT_EQ(q1.UnRotate(axis), q1URAxis);</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">const</span> Vec3T q1RightAxis(</div>
<div class="line">            TypeParam{ 0.33900278742950163 },</div>
<div class="line">            TypeParam{ -0.61767429804632101 },</div>
<div class="line">            TypeParam{ 0.70961649617805012 }</div>
<div class="line">        );</div>
<div class="line">        EXPECT_EQ(q1.RightVector(), q1RightAxis);</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">const</span> Vec3T q1UpAxis(</div>
<div class="line">            TypeParam{ -0.51081111339960539 },</div>
<div class="line">            TypeParam{ 0.51256399765763738 },</div>
<div class="line">            TypeParam{ 0.69018124774053136 }</div>
<div class="line">        );</div>
<div class="line">        EXPECT_EQ(q1.UpVector(), q1UpAxis);</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">const</span> Vec3T q1ForwardAxis(</div>
<div class="line">            TypeParam{ -0.79003108580769366 },</div>
<div class="line">            TypeParam{ -0.59645335931504828 },</div>
<div class="line">            TypeParam{ -0.14175427196141333 }</div>
<div class="line">        );</div>
<div class="line">        EXPECT_EQ(q1.ForwardVector(), q1ForwardAxis);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    TYPED_TEST(QuaternionTest, Euler)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Pi/2 angle on X Axis.</span></div>
<div class="line">        <span class="keyword">const</span> QuatT q1(90.0_deg, Vec3T::Right);</div>
<div class="line">        <span class="keyword">const</span> Vec3T res_eul1(90, 0, 0);</div>
<div class="line">        <span class="keyword">const</span> Vec3&lt;DegT&gt; eul1 = q1.ToEuler();</div>
<div class="line">        EXPECT_EQ(Vec3T(eul1), res_eul1);</div>
<div class="line">        EXPECT_EQ(QuatT::FromEuler(eul1), q1);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Pi/2 angle on Y Axis.</span></div>
<div class="line">        <span class="keyword">const</span> QuatT q2(90.0_deg, Vec3T::Up);</div>
<div class="line">        <span class="keyword">const</span> Vec3T res_eul2(0, 90, 0);</div>
<div class="line">        <span class="keyword">const</span> Vec3&lt;DegT&gt; eul2 = q2.ToEuler();</div>
<div class="line">        EXPECT_VEC3_NEAR(Vec3T(eul2), res_eul2, 0.00001);</div>
<div class="line">        EXPECT_EQ(QuatT::FromEuler(eul2), q2);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Pi/2 angle on Z Axis.</span></div>
<div class="line">        <span class="keyword">const</span> QuatT q3(90.0_deg, Vec3T::Forward);</div>
<div class="line">        <span class="keyword">const</span> Vec3T res_eul3(0, 0, 90);</div>
<div class="line">        <span class="keyword">const</span> Vec3&lt;DegT&gt; eul3 = q3.ToEuler();</div>
<div class="line">        EXPECT_EQ(Vec3T(eul3), res_eul3);</div>
<div class="line">        EXPECT_EQ(QuatT::FromEuler(eul3), q3);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Pi/2 angle on XY Axis.</span></div>
<div class="line">        <span class="keyword">const</span> QuatT q4(90.0_deg, Vec3T(1, 1, 0).Normalize());</div>
<div class="line">        <span class="keyword">const</span> Vec3T res_eul4(90, 45, 45);</div>
<div class="line">        <span class="keyword">const</span> Vec3&lt;DegT&gt; eul4 = q4.ToEuler();</div>
<div class="line">        EXPECT_VEC3_NEAR(Vec3T(eul4), res_eul4, 0.00001);</div>
<div class="line">        EXPECT_EQ(QuatT::FromEuler(eul4), q4);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Pi/2 angle on XZ Axis.</span></div>
<div class="line">        <span class="keyword">const</span> QuatT q5(90.0_deg, Vec3T(1, 0, 1).Normalize());</div>
<div class="line">        <span class="keyword">const</span> Vec3T res_eul5(54.75f, -30.0f, 54.75f);</div>
<div class="line">        <span class="keyword">const</span> Vec3&lt;DegT&gt; eul5 = q5.ToEuler();</div>
<div class="line">        EXPECT_VEC3_NEAR(Vec3T(eul5), res_eul5, 0.015);</div>
<div class="line">        EXPECT_QUAT_NEAR(QuatT::FromEuler(eul5), q5, 0.000001);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Pi/2 angle on YZ Axis.</span></div>
<div class="line">        <span class="keyword">const</span> QuatT q6(90.0_deg, Vec3T(0, 1, 1).Normalize());</div>
<div class="line">        <span class="keyword">const</span> Vec3T res_eul6(45, 45, 90);</div>
<div class="line">        <span class="keyword">const</span> Vec3&lt;DegT&gt; eul6 = q6.ToEuler();</div>
<div class="line">        EXPECT_VEC3_NEAR(Vec3T(eul6), res_eul6, 0.00001);</div>
<div class="line">        EXPECT_EQ(QuatT::FromEuler(eul6), q6);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Pi/2 angle on XYZ Axis.</span></div>
<div class="line">        <span class="keyword">const</span> QuatT q7(90.0_deg, Vec3T(1, 1, 1).Normalize());</div>
<div class="line">        <span class="keyword">const</span> Vec3T res_eul7(70, 14, 70);</div>
<div class="line">        <span class="keyword">const</span> Vec3&lt;DegT&gt; eul7 = q7.ToEuler();</div>
<div class="line">        EXPECT_VEC3_NEAR(Vec3T(eul7), res_eul7, 0.15);</div>
<div class="line">        EXPECT_EQ(QuatT::FromEuler(eul7), q7);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        <span class="comment">// random angle on random axis.</span></div>
<div class="line">        <span class="keyword">const</span> QuatT q8(145.264_deg, Vec3T(3.656f, 1.15f, 7.36f).Normalize());</div>
<div class="line">        <span class="keyword">const</span> Vec3T res_eul8 = Vec3T(37.84f, -39.26f, 127.20f);</div>
<div class="line">        <span class="keyword">const</span> Vec3&lt;DegT&gt; eul8 = q8.ToEuler();</div>
<div class="line">        EXPECT_VEC3_NEAR(Vec3T(eul8), res_eul8, 0.01);</div>
<div class="line">        EXPECT_QUAT_NEAR(QuatT::FromEuler(eul8), q8, 0.000001);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    TYPED_TEST(QuaternionTest, Dot)</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">const</span> QuatT q1(TypeParam{ 66.25 }, TypeParam{ 5.23 }, TypeParam{ 12.36 }, TypeParam{ -96.31 });</div>
<div class="line">        <span class="keyword">const</span> QuatT q2(TypeParam{ -7.21 }, TypeParam{ 88.25 }, TypeParam{ 94.01 }, TypeParam{ 1.265 });</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">const</span> TypeParam dot = q1.w * q2.w + q1.x * q2.x + q1.y * q2.y + q1.z * q2.z;</div>
<div class="line"> </div>
<div class="line">        EXPECT_EQ(QuatT::Dot(q1, q2), dot);</div>
<div class="line">        EXPECT_EQ(q1 | q2, dot);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    TYPED_TEST(QuaternionTest, Lerp)</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">const</span> QuatT q1(TypeParam{ 0.653799 }, TypeParam{ 0.491984 }, TypeParam{ -0.573436 }, TypeParam{ -0.0408624 });</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">const</span> QuatT q2(TypeParam{ 0.2845691 }, TypeParam{ 0.05528782 }, TypeParam{ -0.162611 }, TypeParam{ -0.9431444 });</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Precomputed value.</span></div>
<div class="line">        <span class="keyword">const</span> QuatT lerp_res05(TypeParam{ 0.5721251 }, TypeParam{ 0.3336728 }, TypeParam{ -0.4487695 }, TypeParam{ -0.5999511 });</div>
<div class="line">        EXPECT_QUAT_NEAR(QuatT::Lerp(q1, q2, 0.5f), lerp_res05, 0.000001);</div>
<div class="line"> </div>
<div class="line">        EXPECT_QUAT_NEAR(QuatT::Lerp(q1, q2, 2.0f), q2, 0.000001);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Precomputed value.</span></div>
<div class="line">        <span class="keyword">const</span> QuatT ulerp_res1(TypeParam{ 0.5377033 }, TypeParam{ 0.4881137 }, TypeParam{ -0.517327 }, TypeParam{ 0.4527616 });</div>
<div class="line">        EXPECT_QUAT_NEAR(QuatT::LerpUnclamped(q1, q2, -1.0f), ulerp_res1, 0.000001);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Precomputed value.</span></div>
<div class="line">        <span class="keyword">const</span> QuatT slerp_res05(TypeParam{ 0.5721251 }, TypeParam{ 0.3336728 }, TypeParam{ -0.4487695 }, TypeParam{ -0.5999511 });</div>
<div class="line">        EXPECT_QUAT_NEAR(QuatT::SLerp(q1, q2, 0.5f), slerp_res05, 0.000001);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    TYPED_TEST(QuaternionTest, Operators)</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">const</span> QuatT q1(TypeParam{ 66.25 }, TypeParam{ 5.23 }, TypeParam{ 12.36 }, TypeParam{ -96.31 });</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">const</span> QuatT mq1(-q1.w, -q1.x, -q1.y, -q1.z);</div>
<div class="line">        EXPECT_EQ(-q1, mq1);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Scalar Scale.</span></div>
<div class="line">        TypeParam scale = TypeParam{ 56.21 };</div>
<div class="line">        <span class="keyword">const</span> QuatT sq1(q1.w * scale, q1.x * scale, q1.y * scale, q1.z * scale);</div>
<div class="line">        EXPECT_EQ(q1 * scale, sq1);</div>
<div class="line">        EXPECT_EQ(scale * q1, sq1);</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">const</span> QuatT usq1(q1.w / scale, q1.x / scale, q1.y / scale, q1.z / scale);</div>
<div class="line">        <span class="keyword">const</span> QuatT susq1(scale / q1.w, scale / q1.x, scale / q1.y, scale / q1.z);</div>
<div class="line">        EXPECT_EQ(q1 / scale, usq1);</div>
<div class="line">        EXPECT_EQ(scale / q1, susq1);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Quat operators.</span></div>
<div class="line">        <span class="keyword">const</span> QuatT q2(TypeParam{ 44.21 }, TypeParam{ -54.21}, TypeParam{ 2.32}, TypeParam{ 100.31 });</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">const</span> QuatT q1pq2(q1.w + q2.w, q1.x + q2.x, q1.y + q2.y, q1.z + q2.z);</div>
<div class="line">        EXPECT_EQ(q1 + q2, q1pq2);</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">const</span> QuatT q1mq2(q1.w - q2.w, q1.x - q2.x, q1.y - q2.y, q1.z - q2.z);</div>
<div class="line">        EXPECT_EQ(q1 - q2, q1mq2);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        <span class="keyword">const</span> QuatT qmlt1(</div>
<div class="line">            TypeParam{ 0.65379899684951437 },</div>
<div class="line">            TypeParam{ 0.49198400932684733 },</div>
<div class="line">            TypeParam{ -0.57343602132006610 },</div>
<div class="line">            TypeParam{ -0.040862400050191698 }</div>
<div class="line">        );</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">const</span> QuatT qmlt2(</div>
<div class="line">            TypeParam{ 0.28456911695921927 },</div>
<div class="line">            TypeParam{ 0.055287819843885436 },</div>
<div class="line">            TypeParam{ - 0.16261099422502870 },</div>
<div class="line">            TypeParam{ -0.94314438937370981 }</div>
<div class="line">        );</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">const</span> QuatT q1mltq2(</div>
<div class="line">            TypeParam{ 0.027064135033571489 },</div>
<div class="line">            TypeParam{ 0.71033886691834713 },</div>
<div class="line">            TypeParam{ 0.19225567792515003 },</div>
<div class="line">            TypeParam{ -0.67655301421661285 }</div>
<div class="line">        );</div>
<div class="line">        EXPECT_EQ(qmlt1 * qmlt2, q1mltq2);</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">const</span> QuatT q1dq2(</div>
<div class="line">            TypeParam{ 0.34503787137100789 },</div>
<div class="line">            TypeParam{ -0.43033195673395258 },</div>
<div class="line">            TypeParam{ -0.51862004236446857 },</div>
<div class="line">            TypeParam{ 0.65329666001837794 }</div>
<div class="line">        );</div>
<div class="line">        EXPECT_EQ(qmlt1 / qmlt2, q1dq2);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// op *= scalar.</span></div>
<div class="line">        QuatT q3 = q1;</div>
<div class="line">        q3 *= scale;</div>
<div class="line">        EXPECT_EQ(q3, sq1);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        <span class="comment">// op /= scalar.</span></div>
<div class="line">        QuatT q4 = q1;</div>
<div class="line">        q4 /= scale;</div>
<div class="line">        EXPECT_EQ(q4, usq1);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        <span class="comment">// op += Quat.</span></div>
<div class="line">        QuatT q5 = q1;</div>
<div class="line">        q5 += q2;</div>
<div class="line">        EXPECT_EQ(q5, q1pq2);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// op -= Quat.</span></div>
<div class="line">        QuatT q6 = q1;</div>
<div class="line">        q6 -= q2;</div>
<div class="line">        EXPECT_EQ(q6, q1mq2);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        <span class="comment">// op *= Quat.</span></div>
<div class="line">        QuatT q7 = qmlt1;</div>
<div class="line">        q7 *= qmlt2;</div>
<div class="line">        EXPECT_EQ(q7, q1mltq2);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        <span class="comment">// op /= Quat.</span></div>
<div class="line">        QuatT q8 = qmlt1;</div>
<div class="line">        q8 /= qmlt2;</div>
<div class="line">        EXPECT_EQ(q8, q1dq2);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    TYPED_TEST(QuaternionTest, Accessors)</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">const</span> QuatT q1(TypeParam{ 66.321 }, TypeParam{ 92.25 }, TypeParam{ 7.26 }, TypeParam{ -66.31 });</div>
<div class="line"> </div>
<div class="line">        EXPECT_EQ(q1[0], q1.w);</div>
<div class="line">        EXPECT_EQ(q1[1], q1.x);</div>
<div class="line">        EXPECT_EQ(q1[2], q1.y);</div>
<div class="line">        EXPECT_EQ(q1[3], q1.z);</div>
<div class="line"> </div>
<div class="line">        EXPECT_EQ(q1.Data(), &amp;q1.w);</div>
<div class="line">        EXPECT_EQ(<span class="keyword">const_cast&lt;</span>QuatT&amp;<span class="keyword">&gt;</span>(q1).Data(), &amp;q1.w);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
